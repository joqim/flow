{"version":3,"file":"index.cjs.js","sources":["../../../src/elements/passage-login/LoginApp.ce.vue","../../../src/elements/passage-login/index.ts"],"sourcesContent":["<template>\n  <div id=\"passage-auth-container\" ref=\"containerRef\">\n    <div class=\"container\" v-show=\"!initialLoading\">\n      <passage-router-view :key=\"appId\" />\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { useRouter } from '@/PassageAuth/composables/useRouter'\nimport { LoginRoute } from '@/PassageAuth/router/routes'\nimport { defineComponent, onBeforeUpdate, PropType, ref, watch } from 'vue'\nimport { useAppId } from '@/composables/useAppId'\nimport { useWebFonts } from '@/composables/useWebFonts'\nimport { useCallbacks, BeforeAuthCallback, OnSuccessCallback } from '@/composables/useCallbacks'\nimport PassageRouterView from '@/PassageAuth/views/RouterView/RouterView.vue'\nimport appStyles from '../../assets/scss/app.scss'\nimport { useIntlTelInput } from '@/composables/useIntlTelInput'\nimport { setLocale } from '@/composables/useLocale'\nimport { useDefaultCountryCode } from '@/composables/useDefaultCountryCode'\n\nexport default defineComponent({\n  name: 'LoginApp',\n  props: {\n    appId: String,\n    beforeAuth: Function as PropType<BeforeAuthCallback>,\n    onSuccess: Function as PropType<OnSuccessCallback>,\n    lang: String,\n    defaultCountryCode: String,\n  },\n  components: {\n    PassageRouterView,\n  },\n  styles: [appStyles],\n  setup(props) {\n    function storeProps() {\n      const { updateAppId } = useAppId()\n      if (props.appId) {\n        updateAppId(props.appId)\n      }\n\n      const { updateDefaultCountryCode } = useDefaultCountryCode()\n      updateDefaultCountryCode(props.defaultCountryCode)\n\n      const { setBeforeAuth, setOnSuccess } = useCallbacks()\n      setBeforeAuth(props.beforeAuth)\n      setOnSuccess(props.onSuccess)\n    }\n    storeProps()\n\n    onBeforeUpdate(() => {\n      storeProps()\n    })\n\n    const initialLoading = ref<boolean>(true)\n    setLocale(props.lang).finally(() => {\n      initialLoading.value = false\n    })\n    watch(\n      () => props.lang,\n      (previous, next) => {\n        if (previous !== next) {\n          setLocale(props.lang)\n        }\n      },\n    )\n\n    const { router } = useRouter()\n    router.resetRouter()\n    router.homeRoute = LoginRoute\n\n    useWebFonts()\n\n    const containerRef = ref()\n\n    useIntlTelInput(containerRef)\n\n    return {\n      containerRef,\n      initialLoading,\n    }\n  },\n})\n</script>\n","import LoginApp from './LoginApp.ce.vue'\nimport { defineCustomElement } from '@vue/runtime-dom'\nimport { safelyRegisterElement } from '@/utils/customElements'\n\nconst PassageLogin = defineCustomElement(LoginApp)\n\nexport function registerPassageLoginElement(): void {\n  safelyRegisterElement(PassageLogin, 'login')\n}\n\nregisterPassageLoginElement()\n"],"names":["_sfc_main","defineComponent","name","props","appId","String","beforeAuth","Function","onSuccess","lang","defaultCountryCode","components","PassageRouterView","styles","appStyles","setup","storeProps","updateAppId","useAppId","updateDefaultCountryCode","useDefaultCountryCode","setBeforeAuth","setOnSuccess","useCallbacks","onBeforeUpdate","initialLoading","ref","setLocale","finally","value","customElements","watch","previous","next","router","useRouter","resetRouter","homeRoute","LoginRoute","useWebFonts","containerRef","useIntlTelInput","_hoisted_1","id","_openBlock","_createElementBlock","_withDirectives","_createElementVNode","_hoisted_2","openBlock","_createBlock","_component_passage_router_view","key","_ctx","PassageLogin","defineCustomElement","LoginApp","registerPassageLoginElement"],"mappings":"gLAoBA,MAAKA,EAAaC,EAAAA,gBAAa,CAC7BC,KAAM,WACNC,MAAO,CACLC,MAAOC,OACPC,WAAYC,SACZC,UAAWD,SACXE,KAAMJ,OACNK,mBAAoBL,QAEtBM,WAAY,CAAAC,kBACVA,EAAAA,mBAEFC,OAAQ,CAACC,EAAAA,WACTC,MAAMZ,GACJ,SAASa,IACD,MAAAC,YAAEA,GAAgBC,EAAAA,WACpBf,EAAMC,OACRa,EAAYd,EAAMC,OAGd,MAAAe,yBAAEA,GAA6BC,EAAAA,wBACrCD,EAAyBhB,EAAMO,oBAE/B,MAAMW,cAAEA,EAAAC,aAAeA,GAAiBC,EAAaA,eACrDF,EAAclB,EAAMG,YACpBgB,EAAanB,EAAMK,eAIrBgB,EAAAA,gBAAe,YAIT,MAAAC,EAAiBC,OAAa,GACpCC,EAAAA,UAAUxB,EAAMM,MAAMmB,SAAQ,KAC5BH,EAAeI,OAAQ,KAEzBC,EAAAC,OACE,IAAM5B,EAAMM,OACZ,CAACuB,EAAUC,KACLD,IAAaC,eACL9B,EAAMM,SAKhB,MAAAyB,OAAEA,GAAWC,EAAAA,YACnBD,EAAOE,cACPF,EAAOG,UAAYC,aAEPC,EAAAA,cAEN,MAAAC,EAAed,EAAAA,MAId,OAFPe,EAAAA,gBAAgBD,GAET,CACLA,aAAAA,EACAf,eAAAA,MA7EIiB,EAAA,CAAyBC,GAAG,yBAAAjB,IAAA,+IAClC,OAAAkB,cAAAC,qBAEM,MAFNH,EAEM,CADgCI,iBAAAC,EAAAA,gBAAA,MAAAC,EAAA,EAAAJ,EAAAK,YAAAC,EAAAA,YAAAC,EAAA,CAAAC,IAAAC,EAAAjD,wDCC1C,MAAMkD,EAAeC,EAAAA,oBAAoBC,GAElC,SAASC,4BACQH,EAAc,SAGtCG"}