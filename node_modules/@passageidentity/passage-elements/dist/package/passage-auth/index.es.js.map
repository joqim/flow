{"version":3,"file":"index.es.js","sources":["../../../src/elements/passage-auth/AuthApp.ce.vue","../../../src/elements/passage-auth/index.ts"],"sourcesContent":["<template>\n  <div id=\"passage-auth-container\" ref=\"containerRef\">\n    <div class=\"container\" v-show=\"!initialLoading\">\n      <passage-router-view :key=\"appId\"></passage-router-view>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, onBeforeUpdate, PropType, ref, watch } from 'vue'\nimport { useWebFonts } from '@/composables/useWebFonts'\nimport { useAppId } from '@/composables/useAppId'\nimport { useCallbacks, BeforeAuthCallback, OnSuccessCallback, OnEventCallback } from '@/composables/useCallbacks'\nimport { useDefaultCountryCode } from '@/composables/useDefaultCountryCode'\nimport PassageRouterView from '@/PassageAuth/views/RouterView/RouterView.vue'\nimport appStyles from '../../assets/scss/app.scss'\nimport { useRouter } from '@/PassageAuth/composables/useRouter'\nimport { useIntlTelInput } from '@/composables/useIntlTelInput'\nimport { setLocale } from '@/composables/useLocale'\n\nexport default defineComponent({\n  name: 'AuthApp',\n  components: {\n    PassageRouterView,\n  },\n  props: {\n    appId: String,\n    beforeAuth: Function as PropType<BeforeAuthCallback>,\n    onSuccess: Function as PropType<OnSuccessCallback>,\n    onEvent: Function as PropType<OnEventCallback>,\n    lang: String,\n    defaultCountryCode: String,\n  },\n  styles: [appStyles],\n  setup(props) {\n    function storeProps() {\n      const { updateAppId } = useAppId()\n      if (props.appId) {\n        updateAppId(props.appId)\n      }\n\n      const { updateDefaultCountryCode } = useDefaultCountryCode()\n      updateDefaultCountryCode(props.defaultCountryCode)\n\n      const { setBeforeAuth, setOnSuccess, setOnEvent } = useCallbacks()\n      setBeforeAuth(props.beforeAuth)\n      setOnSuccess(props.onSuccess)\n      setOnEvent(props.onEvent)\n    }\n    storeProps()\n\n    onBeforeUpdate(() => {\n      storeProps()\n    })\n\n    const initialLoading = ref<boolean>(true)\n    setLocale(props.lang).finally(() => {\n      initialLoading.value = false\n    })\n    watch(\n      () => props.lang,\n      (previous, next) => {\n        if (previous !== next) {\n          setLocale(props.lang)\n        }\n      },\n    )\n\n    const { router } = useRouter()\n    router.resetRouter()\n\n    useWebFonts()\n\n    const containerRef = ref()\n\n    useIntlTelInput(containerRef)\n\n    return {\n      containerRef,\n      initialLoading,\n    }\n  },\n})\n</script>\n","import AuthApp from './AuthApp.ce.vue'\nimport { defineCustomElement } from '@vue/runtime-dom'\nimport { safelyRegisterElement } from '@/utils/customElements'\n\nconst PassageAuth = defineCustomElement(AuthApp)\n\nexport function registerPassageAuthElement(): void {\n  safelyRegisterElement(PassageAuth, 'auth')\n}\n\nregisterPassageAuthElement()\n"],"names":["_openBlock","_createElementBlock","_withDirectives","_createElementVNode","_createBlock"],"mappings":";;AAmBA,MAAK,YAAa,gBAAa;AAAA,EAC7B,MAAM;AAAA,EACN,YAAY;AAAA,IACV;AAAA,EACF;AAAA,EACA,OAAO;AAAA,IACL,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,WAAW;AAAA,IACX,SAAS;AAAA,IACT,MAAM;AAAA,IACN,oBAAoB;AAAA,EACtB;AAAA,EACA,QAAQ,CAAC,SAAS;AAAA,EAClB,MAAM,OAAO;AACX,aAAS,aAAa;AACd,YAAA,EAAE,gBAAgB;AACxB,UAAI,MAAM,OAAO;AACf,oBAAY,MAAM,KAAK;AAAA,MACzB;AAEM,YAAA,EAAE,6BAA6B;AACrC,+BAAyB,MAAM,kBAAkB;AAEjD,YAAM,EAAE,eAAe,cAAc,eAAe,aAAa;AACjE,oBAAc,MAAM,UAAU;AAC9B,mBAAa,MAAM,SAAS;AAC5B,iBAAW,MAAM,OAAO;AAAA,IAC1B;AACW;AAEX,mBAAe,MAAM;AACR;IAAA,CACZ;AAEK,UAAA,iBAAiB,IAAa,IAAI;AACxC,cAAU,MAAM,IAAI,EAAE,QAAQ,MAAM;AAClC,qBAAe,QAAQ;AAAA,IAAA,CACxB;AACD;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,UAAU,SAAS;AAClB,YAAI,aAAa,MAAM;AACrB,oBAAU,MAAM,IAAI;AAAA,QACtB;AAAA,MACF;AAAA,IAAA;AAGI,UAAA,EAAE,WAAW;AACnB,WAAO,YAAY;AAEP;AAEZ,UAAM,eAAe;AAErB,oBAAgB,YAAY;AAErB,WAAA;AAAA,MACL;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;AAhFS,MAAA,aAAA;AAAA,EAAyB,IAAG;AAAA,EAAA,KAAA;;;;;AAClC,SAAAA,UAAA,GAAAC,mBAEM,OAFN,YAEM;AAAA,IADoDC,eAAAC,gBAAA,OAAA,YAAA;AAAA,OAAAH,UAAA,GAAAI,YAAA,gCAAA,EAAA,KAAA,KAAA,OAAA;AAAA;;;;;;ACC9D,MAAM,cAAc,oBAAoB,OAAO;AAExC,SAAS,6BAAmC;AACjD,wBAAsB,aAAa,MAAM;AAC3C;AAEA,2BAA2B;AAAA,SAAA;"}