{"version":3,"file":"index.cjs.js","sources":["../../../src/elements/passage-auth/AuthApp.ce.vue","../../../src/elements/passage-auth/index.ts"],"sourcesContent":["<template>\n  <div id=\"passage-auth-container\" ref=\"containerRef\">\n    <div class=\"container\" v-show=\"!initialLoading\">\n      <passage-router-view :key=\"appId\"></passage-router-view>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, onBeforeUpdate, PropType, ref, watch } from 'vue'\nimport { useWebFonts } from '@/composables/useWebFonts'\nimport { useAppId } from '@/composables/useAppId'\nimport { useCallbacks, BeforeAuthCallback, OnSuccessCallback, OnEventCallback } from '@/composables/useCallbacks'\nimport { useDefaultCountryCode } from '@/composables/useDefaultCountryCode'\nimport PassageRouterView from '@/PassageAuth/views/RouterView/RouterView.vue'\nimport appStyles from '../../assets/scss/app.scss'\nimport { useRouter } from '@/PassageAuth/composables/useRouter'\nimport { useIntlTelInput } from '@/composables/useIntlTelInput'\nimport { setLocale } from '@/composables/useLocale'\n\nexport default defineComponent({\n  name: 'AuthApp',\n  components: {\n    PassageRouterView,\n  },\n  props: {\n    appId: String,\n    beforeAuth: Function as PropType<BeforeAuthCallback>,\n    onSuccess: Function as PropType<OnSuccessCallback>,\n    onEvent: Function as PropType<OnEventCallback>,\n    lang: String,\n    defaultCountryCode: String,\n  },\n  styles: [appStyles],\n  setup(props) {\n    function storeProps() {\n      const { updateAppId } = useAppId()\n      if (props.appId) {\n        updateAppId(props.appId)\n      }\n\n      const { updateDefaultCountryCode } = useDefaultCountryCode()\n      updateDefaultCountryCode(props.defaultCountryCode)\n\n      const { setBeforeAuth, setOnSuccess, setOnEvent } = useCallbacks()\n      setBeforeAuth(props.beforeAuth)\n      setOnSuccess(props.onSuccess)\n      setOnEvent(props.onEvent)\n    }\n    storeProps()\n\n    onBeforeUpdate(() => {\n      storeProps()\n    })\n\n    const initialLoading = ref<boolean>(true)\n    setLocale(props.lang).finally(() => {\n      initialLoading.value = false\n    })\n    watch(\n      () => props.lang,\n      (previous, next) => {\n        if (previous !== next) {\n          setLocale(props.lang)\n        }\n      },\n    )\n\n    const { router } = useRouter()\n    router.resetRouter()\n\n    useWebFonts()\n\n    const containerRef = ref()\n\n    useIntlTelInput(containerRef)\n\n    return {\n      containerRef,\n      initialLoading,\n    }\n  },\n})\n</script>\n","import AuthApp from './AuthApp.ce.vue'\nimport { defineCustomElement } from '@vue/runtime-dom'\nimport { safelyRegisterElement } from '@/utils/customElements'\n\nconst PassageAuth = defineCustomElement(AuthApp)\n\nexport function registerPassageAuthElement(): void {\n  safelyRegisterElement(PassageAuth, 'auth')\n}\n\nregisterPassageAuthElement()\n"],"names":["_sfc_main","defineComponent","name","components","PassageRouterView","props","appId","String","beforeAuth","Function","onSuccess","onEvent","lang","defaultCountryCode","styles","appStyles","setup","storeProps","updateAppId","useAppId","updateDefaultCountryCode","useDefaultCountryCode","setBeforeAuth","setOnSuccess","setOnEvent","useCallbacks","onBeforeUpdate","initialLoading","ref","setLocale","finally","value","customElements","watch","previous","next","router","useRouter","resetRouter","useWebFonts","containerRef","useIntlTelInput","_hoisted_1","id","_openBlock","_createElementBlock","_withDirectives","_createElementVNode","_hoisted_2","openBlock","_createBlock","_component_passage_router_view","key","_ctx","PassageAuth","defineCustomElement","AuthApp","registerPassageAuthElement"],"mappings":"gLAmBA,MAAKA,EAAaC,EAAAA,gBAAa,CAC7BC,KAAM,UACNC,WAAY,CAAAC,kBACVA,EAAAA,mBAEFC,MAAO,CACLC,MAAOC,OACPC,WAAYC,SACZC,UAAWD,SACXE,QAASF,SACTG,KAAML,OACNM,mBAAoBN,QAEtBO,OAAQ,CAACC,EAAAA,WACTC,MAAMX,GACJ,SAASY,IACD,MAAAC,YAAEA,GAAgBC,EAAAA,WACpBd,EAAMC,OACRY,EAAYb,EAAMC,OAGd,MAAAc,yBAAEA,GAA6BC,EAAAA,wBACrCD,EAAyBf,EAAMQ,oBAE/B,MAAMS,cAAEA,EAAeC,aAAAA,EAAAC,WAAcA,GAAeC,EAAaA,eACjEH,EAAcjB,EAAMG,YACpBe,EAAalB,EAAMK,WACnBc,EAAWnB,EAAMM,aAInBe,EAAAA,gBAAe,YAIT,MAAAC,EAAiBC,OAAa,GACpCC,EAAAA,UAAUxB,EAAMO,MAAMkB,SAAQ,KAC5BH,EAAeI,OAAQ,KAEzBC,EAAAC,OACE,IAAM5B,EAAMO,OACZ,CAACsB,EAAUC,KACLD,IAAaC,eACL9B,EAAMO,SAKhB,MAAAwB,OAAEA,GAAWC,EAAAA,YACnBD,EAAOE,cAEKC,EAAAA,cAEN,MAAAC,EAAeZ,EAAAA,MAId,OAFPa,EAAAA,gBAAgBD,GAET,CACLA,aAAAA,EACAb,eAAAA,MA7EIe,EAAA,CAAyBC,GAAG,yBAAAf,IAAA,+IAClC,OAAAgB,cAAAC,qBAEM,MAFNH,EAEM,CADoDI,iBAAAC,EAAAA,gBAAA,MAAAC,EAAA,EAAAJ,EAAAK,YAAAC,EAAAA,YAAAC,EAAA,CAAAC,IAAAC,EAAA/C,wDCC9D,MAAMgD,EAAcC,EAAAA,oBAAoBC,GAEjC,SAASC,4BACQH,EAAa,QAGrCG"}