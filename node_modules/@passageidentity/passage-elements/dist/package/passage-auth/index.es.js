import { d as defineComponent, a as appStyles, o as onBeforeUpdate, r as ref, s as setLocale, w as watch, u as useWebFonts, b as useIntlTelInput, _ as _export_sfc, c as useAppId, e as resolveComponent, f as createElementBlock, g as withDirectives, v as vShow, h as createBaseVNode, i as createBlock, j as useDefaultCountryCode, k as openBlock, l as defineCustomElement, m as safelyRegisterElement } from "../customElements.es.js";
import { P as PassageRouterView, u as useCallbacks, a as useRouter } from "../customElements.es2.js";
const _sfc_main = defineComponent({
  name: "AuthApp",
  components: {
    PassageRouterView
  },
  props: {
    appId: String,
    beforeAuth: Function,
    onSuccess: Function,
    onEvent: Function,
    lang: String,
    defaultCountryCode: String
  },
  styles: [appStyles],
  setup(props) {
    function storeProps() {
      const { updateAppId } = useAppId();
      if (props.appId) {
        updateAppId(props.appId);
      }
      const { updateDefaultCountryCode } = useDefaultCountryCode();
      updateDefaultCountryCode(props.defaultCountryCode);
      const { setBeforeAuth, setOnSuccess, setOnEvent } = useCallbacks();
      setBeforeAuth(props.beforeAuth);
      setOnSuccess(props.onSuccess);
      setOnEvent(props.onEvent);
    }
    storeProps();
    onBeforeUpdate(() => {
      storeProps();
    });
    const initialLoading = ref(true);
    setLocale(props.lang).finally(() => {
      initialLoading.value = false;
    });
    watch(
      () => props.lang,
      (previous, next) => {
        if (previous !== next) {
          setLocale(props.lang);
        }
      }
    );
    const { router } = useRouter();
    router.resetRouter();
    useWebFonts();
    const containerRef = ref();
    useIntlTelInput(containerRef);
    return {
      containerRef,
      initialLoading
    };
  }
});
const _hoisted_1 = {
  id: "passage-auth-container",
  ref: "containerRef"
};
const _hoisted_2 = { class: "container" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_passage_router_view = resolveComponent("passage-router-view");
  return openBlock(), createElementBlock("div", _hoisted_1, [
    withDirectives(createBaseVNode("div", _hoisted_2, [
      (openBlock(), createBlock(_component_passage_router_view, { key: _ctx.appId }))
    ], 512), [
      [vShow, !_ctx.initialLoading]
    ])
  ], 512);
}
var AuthApp = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
const PassageAuth = defineCustomElement(AuthApp);
function registerPassageAuthElement() {
  safelyRegisterElement(PassageAuth, "auth");
}
registerPassageAuthElement();
export { registerPassageAuthElement };
//# sourceMappingURL=index.es.js.map
